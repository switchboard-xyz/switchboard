<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-attestation-program">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">The Attestation Program | Switchboard</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.switchboard.xyz/img/documentation_card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.switchboard.xyz/img/documentation_card.jpg"><meta data-rh="true" property="og:url" content="https://docs.switchboard.xyz/attestation-program"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="The Attestation Program | Switchboard"><meta data-rh="true" name="description" content="Previously, Switchboard&#x27;s security model depended on economic incentives where"><meta data-rh="true" property="og:description" content="Previously, Switchboard&#x27;s security model depended on economic incentives where"><meta data-rh="true" name="keywords" content="Switchboard,web3,oracle,data feeds,vrf,randomness,solana,aptos,near"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.switchboard.xyz/attestation-program"><link data-rh="true" rel="alternate" href="https://docs.switchboard.xyz/attestation-program" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.switchboard.xyz/attestation-program" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XO84KDTPTB-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Switchboard RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Switchboard Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Switchboard" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.ecaa6708.css">
<link rel="preload" href="/assets/js/runtime~main.b8c8e0f8.js" as="script">
<link rel="preload" href="/assets/js/main.f8a8494a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_JVTn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Switchboard Logo" class="themedImage_Lc2C themedImage--light_OfHa" height="72" width="72"><img src="/img/logo_white.svg" alt="Switchboard Logo" class="themedImage_Lc2C themedImage--dark_aTa8" height="72" width="72"></div><b class="navbar__title text--truncate">Switchboard</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/about">Docs</a><a class="navbar__item navbar__link" href="/api">API</a><div class="searchBox_aK9v"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/switchboard-xyz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_icon__github" aria-label="GitHub repository"></a><a href="https://twitter.com/switchboardxyz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_icon__twitter" aria-label="Twitter Link"></a><div class="toggle__fwT colorModeToggle_w9SD"><button class="clean-btn toggleButton_GPw6 toggleButtonDisabled_MbkH" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_IQ0H"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_XPgo"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_pt1U docsWrapper_x4Rk"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_yVT7" type="button"></button><div class="docPage_PuDF"><aside class="theme-doc-sidebar-container docSidebarContainer_WH5D"><div class="sidebarViewport_SH6O"><div class="sidebar_izeK"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_NUe_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><div class="sidebar__heading-label">About</div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/about">Switchboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/network">The Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/data-models">The Data Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/oracle-program">The Oracle Program</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link menu__link--active" aria-current="page" href="/attestation-program">The Attestation Program</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/what-can-i-build">What Can I Build?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr class="sidebar-separator"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><div class="sidebar__heading-label">Products</div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/functions">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/secrets">Secrets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/data-feeds">Data Feeds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/randomness">Randomness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr class="sidebar-separator"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><div class="sidebar__heading-label">Integrate</div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item tight-sidebar"><a class="menu__link" href="/guides">Integration Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/guides/feeds/best-practices">General Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr class="sidebar-separator"></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/solana">Solana</a><button aria-label="Toggle the collapsible sidebar category &#x27;Solana&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/evm">EVM</a><button aria-label="Toggle the collapsible sidebar category &#x27;EVM&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/aptos">Aptos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Aptos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/near">NEAR</a><button aria-label="Toggle the collapsible sidebar category &#x27;NEAR&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sui">Sui</a><button aria-label="Toggle the collapsible sidebar category &#x27;Sui&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_pB8r"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_74nU"><div class="docItemContainer_rMDH"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_GQIx" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_LKiY"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">The Attestation Program</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_HO6K theme-doc-toc-mobile tocMobile_lc9y"><button type="button" class="clean-btn tocCollapsibleButton_Tbsf">On this page</button></div><div class="theme-doc-markdown markdown"><h1>The Attestation Program</h1><p>Previously, Switchboard&#x27;s security model depended on economic incentives where
data reporters were rewarded or penalized based on the proximity of their
reported data to the median. Oracle operators had to lock up a portion of
economic stake and receive explicit approval from the oracle queue&#x27;s authority.
Although this model provided a degree of decentralization and security, it faced
challenges in aligning the incentives of oracles with DeFi protocols.</p><p>The Switchboard Attestation Program builds upon Switchboard V2s enconomic
incentives by leveraging TEEs. TEEs allow for unique digital signatures to be
created for software running within its enclave, along with the data generated
by that software. This ensures the secure and verifiable confirmation of the
oracles&#x27; integrity and authenticity.</p><p>The Switchboard Attestation Program is a sibling program to the Switchboard
oracle program, and is responsible for verifying attestation quotes on-chain,
which grants or revokes an oracle&#x27;s permissions based on the contents within the
secure enclave. By verifying the code&#x27;s integrity inside the enclave, we can
ensure the code hasn&#x27;t been tampered with and that our application will behave
as expected.</p><p>A AttestationQueueAccount manages a set of valid MRENCLAVE measurements,
representing the permitted software versions an application can run. Any code
changes will alter the enclave&#x27;s state, necessitating the addition of a new
measurement by the AttestationQueueAccount <code>authority</code> before oracles can
upgrade. If a version is found to have a bug, it can be revoked, and oracles
will automatically be removed.</p><p>An oracle account represents a specific SGX enclave. When an oracle is
provisioned, it creates a EnclaveAccount on-chain with the MRENCLAVE measurement
detailing the software version it runs. Quote verification oracles constantly
monitor the chain for oracles requesting verification of their enclave. Upon
detecting such an event, it calls the program and updates or revokes the
associated PermissionAccount based on whether the measurement is allowed on the
oracle&#x27;s AttestationQueueAccount.</p><p>AttestationQueueAccounts dictate how often oracles must verify their enclave,
ensuring that enclaves consistently update and maintain software patches.</p><p>With the Attestation Program, Switchboard V3 enables:</p><ul><li><strong>Oracle Verification</strong>: Oracles are encapsulated within TEEs, generating a
unique digital signature that can be posted on-chain for public verification.
This ensures that the oracles can be trusted while maintaining a decentralized
and verifiable system.</li><li><strong>Execution Verification</strong>: As oracles participate in a queue and handle user
requests, the executions of data feeds, functions, and other tasks can be
verifiably carried out. This allows users to confirm that transactions are
strictly dictated by the code that created them, ensuring system integrity and
security.</li></ul><h2 class="anchor anchorWithStickyNavbar_WPED" id="exploring-sgx-attestation">Exploring SGX Attestation<a href="#exploring-sgx-attestation" class="hash-link" aria-label="Direct link to Exploring SGX Attestation" title="Direct link to Exploring SGX Attestation">​</a></h2><p>Intel Software Guard Extensions (SGX) offer a secure execution environment
called an enclave, where sensitive code and data are protected from unauthorized
access or tampering. The attestation process verifies the enclave&#x27;s identity and
validates its code and data, ensuring authenticity and integrity.</p><p>The Switchboard Attestation Program uses SGX attestation to establish trust in
oracle applications, providing a robust mechanism for verifying secure code
execution within the Trusted Execution Environment (TEE).</p><p>Switchboard services utilize Gramine for the runtime environment. Gramine allows
SGX enclaves to operate as if they were running on a standard operating system,
managing system calls and other essential interactions.</p><h2 class="anchor anchorWithStickyNavbar_WPED" id="crucial-components-in-the-attestation-process">Crucial Components in the Attestation Process<a href="#crucial-components-in-the-attestation-process" class="hash-link" aria-label="Direct link to Crucial Components in the Attestation Process" title="Direct link to Crucial Components in the Attestation Process">​</a></h2><p>The Switchboard attestation process involves several components that work
together to facilitate attestation and verification of SGX enclaves:</p><ul><li><strong>AttestationQueueAccount</strong>: Manages the list of allowed enclave measurements
(MRENCLAVEs) and maintains a dedicated AttestationQueue to verify
attestations.</li><li><strong>EnclaveAccount</strong>: Represents an individual SGX enclave, connects to the
AttestationQueueAccount, and has a 1:N relationship with EnclaveAccount.</li><li><strong>PermissionAccount</strong>: An account between the <em>AttestationQueueAccount</em> and
the <em>EnclaveAccount</em> dictating whether the <em>EnclaveAccount</em> is permitted to
perform on-chain actions.</li><li><strong>EnclaveAccount</strong>: Stores the attestation data (quote) generated by the SGX
enclave for a given EnclaveAccount.</li></ul><h2 class="anchor anchorWithStickyNavbar_WPED" id="attestation-lifecycle">Attestation Lifecycle<a href="#attestation-lifecycle" class="hash-link" aria-label="Direct link to Attestation Lifecycle" title="Direct link to Attestation Lifecycle">​</a></h2><p>The Switchboard Attestation Program follows a structured lifecycle to ensure the
secure and trustworthy execution of code within the TEE:</p><ol><li>Initialize the AttestationQueueAccount</li><li>Register permitted MRENCLAVE measurements</li><li>Create EnclaveAccount and PermissionAccount</li><li>Run an SGX Switchboard function, creates EnclaveAccount from compiled binary</li><li>EnclaveAccount emits a request to the AttestationQueue associated with the
ServiceQueue to verify its MRENCLAVE measurement</li><li>The AttestationQueue verifies the MRENCLAVE measurement on-chain
(attestation)</li><li>The PermissionAccount associated with the EnclaveAccount has the permissions
enabled</li><li>Maintain an active and trustworthy SGX enclave through heartbeats</li></ol><p>By adhering to this lifecycle, the Switchboard Attestation Program ensures the
security, authenticity, and trustworthiness of SGX enclaves operating within the
TEE.</p><p><img loading="lazy" alt="Switchboard Attestation Lifecycle" src="/assets/images/Attestation_Program_Lifecycle-5d9e24cfbc6f410060b34fe514ffeee2.png" width="3456" height="1248" class="img_QIlm"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/oracle-program"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">The Oracle Program</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/what-can-i-build"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">What Can I Build?</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_W_pa thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#exploring-sgx-attestation" class="table-of-contents__link toc-highlight">Exploring SGX Attestation</a></li><li><a href="#crucial-components-in-the-attestation-process" class="table-of-contents__link toc-highlight">Crucial Components in the Attestation Process</a></li><li><a href="#attestation-lifecycle" class="table-of-contents__link toc-highlight">Attestation Lifecycle</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"></div></footer></div>
<script src="/assets/js/runtime~main.b8c8e0f8.js"></script>
<script src="/assets/js/main.f8a8494a.js"></script>
</body>
</html>