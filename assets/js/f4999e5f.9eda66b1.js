"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7553],{54852:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>b});var r=a(49231);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=r.createContext({}),d=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=d(e.components);return r.createElement(c.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),h=d(a),u=n,b=h["".concat(c,".").concat(u)]||h[u]||p[u]||o;return a?r.createElement(b,i(i({ref:t},l),{},{components:a})):r.createElement(b,i({ref:t},l))}));function b(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[h]="string"==typeof e?e:n,i[1]=s;for(var d=2;d<o;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},94550:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var r=a(432),n=(a(49231),a(54852));const o={title:"Dialed in with Switchboard: March 07, 2022",description:"",authors:["gallynaut"],tags:[],hide_table_of_contents:!0},i="Dialed in with Switchboard: Vol. 1",s={permalink:"/blog/2022/03/07/Dialed-in-with-Switchboard",source:"@site/blog/2022/03-07-Dialed-in-with-Switchboard.mdx",title:"Dialed in with Switchboard: March 07, 2022",description:"",date:"2022-03-07T00:00:00.000Z",formattedDate:"March 7, 2022",tags:[],readingTime:2.17,hasTruncateMarker:!1,authors:[{name:"gallynaut",title:"Developer Relations",url:"https://twitter.com/gallynaut",imageURL:"https://pbs.twimg.com/profile_images/1649642820993679365/buRwDkVY_400x400.jpg",key:"gallynaut"}],frontMatter:{title:"Dialed in with Switchboard: March 07, 2022",description:"",authors:["gallynaut"],tags:[],hide_table_of_contents:!0},prevItem:{title:"Dialed in with Switchboard: March 14, 2022",permalink:"/blog/2022/03/14/Dialed-in-with-Switchboard"},nextItem:{title:"Switchboard x Riptide Prizes Announcement",permalink:"/blog/2022/02/25/Switchboard-Riptide-Prizes-Announcement"}},c={authorsImageUrls:[void 0]},d=[{value:"Lending Rate Task",id:"lending-rate-task",level:2},{value:"Mango Perps Task",id:"mango-perps-task",level:2},{value:"Variance Threshold added to Publisher",id:"variance-threshold-added-to-publisher",level:2},{value:"Query Aggregator History On-Chain",id:"query-aggregator-history-on-chain",level:2},{value:"VRF CPI Example",id:"vrf-cpi-example",level:2},{value:"Switchboard V2 CLI",id:"switchboard-v2-cli",level:2}],l={toc:d},h="wrapper";function p(e){let{components:t,...a}=e;return(0,n.kt)(h,(0,r.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Dialed in with Switchboard will be a weekly newsletter about the various\non-going updates with Switchboard.")),(0,n.kt)("h2",{id:"lending-rate-task"},"Lending Rate Task"),(0,n.kt)("p",null,"Last week Switchboard implemented the\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/api/tasks#lendingratetask"},"lendingRateTask")," thanks\nto the work of JetLabs with their\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/jet-lab/defi-yield-ts"},"@jet-lab/defi-yield-ts")," library.\nDevelopers can now source lending and borrowing rates for the top Solana lending\nprotocols on-chain, opening the doors to new automated yield lending strategies."),(0,n.kt)("p",null,"Check out\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/job-directory#lending-rates"},"Switchboard\u2019s Job Directory"),"\nfor some examples on how to use this new task. Also view the protobuf schema for\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/api/tasks#lendingratetask"},"lendingRateTask"),"."),(0,n.kt)("h2",{id:"mango-perps-task"},"Mango Perps Task"),(0,n.kt)("p",null,"Switchboard also added the\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/api/tasks#mangoperpmarkettask"},"mangoPerpMarketTask"),"\nto resolve the current price of perpetual markets on mango. This can be combined\nwith the twapTask to track the time weighted average price of a mango perp\nmarket and build automated strategies around it."),(0,n.kt)("p",null,"Check out\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/job-directory#mango-perps"},"Switchboard\u2019s Job Directory"),"\nfor some examples. You can find Mango Market\u2019s addresses in their\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/blockworks-foundation/mango-client-v3/blob/main/src/ids.json"},"@blockworks-foundation/mango-client-v3"),"\nrepo."),(0,n.kt)("h2",{id:"variance-threshold-added-to-publisher"},"Variance Threshold added to Publisher"),(0,n.kt)("p",null,"The ",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/publisher"},"Publisher")," was updated to allow a\nconfigurable variance threshold field. The\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/architecture/feeds#aggregatoraccountdata"},"varianceThreshold"),"\ndictates the change percentage required before an oracle reports a result\non-chain. A Switchboard data feed includes a pre-funded escrow to reward oracles\nfor each successful update. The varianceThreshold is a cost saving parameter to\nreduce excessive on-chain updates and extend the life of a feed. If an oracle\nresolves a value that is too similar to the last reported value, the oracle\nskips reporting a result and conserves the feed\u2019s escrow. Note, some feeds may\nrequire the most up-to-date data so it is left up to the publisher based on\ntheir use case."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/2000/0*uwaHVEVzPbH26MQe",alt:"Switchboard Lease Configuration"}),(0,n.kt)("em",{parentName:"p"},"Switchboard\nLease Configuration")),(0,n.kt)("h2",{id:"query-aggregator-history-on-chain"},"Query Aggregator History On-Chain"),(0,n.kt)("p",null,"The ",(0,n.kt)("a",{parentName:"p",href:"https://docs.rs/switchboard-v2"},"switchboard-v2")," crate was updated to 0.1.8,\nwhich updates the anchor dependency to 0.22 and added the ability to query an\naggregator\u2019s history buffer on-chain. An aggregator can be configured to store\nthe last N results on-chain in a\n",(0,n.kt)("a",{parentName:"p",href:"https://docs.switchboard.xyz/architecture/feeds/history"},"history buffer account"),".\nThe rust crate now lets you query a history buffer and return the previous\nresults value and timestamp. You can add a history buffer to your data feed\nusing the Publisher on the\n",(0,n.kt)("a",{parentName:"p",href:"https://publish.switchboard.xyz/feeds"},"My Feeds page"),"."),(0,n.kt)("h2",{id:"vrf-cpi-example"},"VRF CPI Example"),(0,n.kt)("p",null,"The\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/switchboard-xyz/vrf-cpi-example"},"@switchboard-xyz/vrf-cpi-example"),"\nwas updated to show how a Program Derived Address (PDA) can be used as a VRF\nAccount\u2019s authority and sign requestRandomness instructions on its behalf. This\nallows VRF Accounts to be controlled by a program and have predefined update\nlogic."),(0,n.kt)("h2",{id:"switchboard-v2-cli"},"Switchboard V2 CLI"),(0,n.kt)("p",null,"The\n",(0,n.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@switchboard-xyz/switchboardv2-cli"},"@switchboard-xyz/switchboardv2-cli"),"\nwas updated to support account deserialization on devnet and mainnet for\nconvenient debugging. Once installed, run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"sbv2 print PUBLICKEY"),"\nwhere PUBLICKEY is any switchboard account, and the CLI will output the\ndeserialized account."))}p.isMDXComponent=!0}}]);