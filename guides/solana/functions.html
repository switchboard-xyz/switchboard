<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/solana/functions/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Functions: Getting Started | Switchboard</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.switchboard.xyz/img/documentation_card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.switchboard.xyz/img/documentation_card.jpg"><meta data-rh="true" property="og:url" content="https://docs.switchboard.xyz/guides/solana/functions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Functions: Getting Started | Switchboard"><meta data-rh="true" name="description" content="Learn how to use Switchboard Functions to push data to your on-chain programs on a schedule or on-demand"><meta data-rh="true" property="og:description" content="Learn how to use Switchboard Functions to push data to your on-chain programs on a schedule or on-demand"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.switchboard.xyz/guides/solana/functions"><link data-rh="true" rel="alternate" href="https://docs.switchboard.xyz/guides/solana/functions" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.switchboard.xyz/guides/solana/functions" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XO84KDTPTB-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Switchboard RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Switchboard Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Switchboard" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.38283691.css">
<link rel="preload" href="/assets/js/runtime~main.40737822.js" as="script">
<link rel="preload" href="/assets/js/main.3ca437e8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_rC1i" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Switchboard Logo" class="themedImage_yYbt themedImage--light_Hqll" height="72" width="72"><img src="/img/logo_white.svg" alt="Switchboard Logo" class="themedImage_yYbt themedImage--dark_QgED" height="72" width="72"></div><b class="navbar__title text--truncate">Switchboard</b></a><a class="navbar__item navbar__link" href="/about">Learn</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides">Guides</a><a class="navbar__item navbar__link" href="/api">API</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Networks</a><ul class="dropdown__menu"><li><a class="dropdown__link heading_icon__aptos" href="/aptos"> Aptos</a></li><li><a class="dropdown__link heading_icon__arbitrum" href="/arbitrum"> Arbitrum</a></li><li><a class="dropdown__link heading_icon__coredao" href="/coredao"> CoreDAO</a></li><li><a class="dropdown__link heading_icon__near" href="/near"> Near</a></li><li><a class="dropdown__link heading_icon__solana" href="/solana"> Solana</a></li><li><a class="dropdown__link heading_icon__sui" href="/sui"> Sui</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More</a><ul class="dropdown__menu"><li><a href="https://switchboardxyz.medium.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">üìö Medium</a></li><li><a href="https://app.switchboard.xyz" target="_blank" rel="noopener noreferrer" class="dropdown__link">üìö Publisher</a></li><li><a href="https://switchboard.xyz/explorer" target="_blank" rel="noopener noreferrer" class="dropdown__link">üîé Explorer</a></li><li><a href="https://switchboard.xyz/ecosystem" target="_blank" rel="noopener noreferrer" class="dropdown__link">ü§ù Ecosystem</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/switchboard-xyz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_icon__github" aria-label="GitHub repository"></a><a href="https://twitter.com/switchboardxyz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_icon__twitter" aria-label="Twitter Link"></a><div class="toggle_XJZP colorModeToggle_XEIO"><button class="clean-btn toggleButton_E1v7 toggleButtonDisabled_WqJE" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon__9W2"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_psEl"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_wjg9"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Tl_n docsWrapper_XHWb"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_J3Xb" type="button"></button><div class="docPage_NxCi"><aside class="theme-doc-sidebar-container docSidebarContainer_HhS4"><div class="sidebarViewport_OotX"><div class="sidebar_VgGQ"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_wO_8"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides">üìö Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr class="sidebar-separator"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><h3 class="sidebar__custom_label sidebar__category_label">General</h3></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/feeds/best-practices">Data Feed Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/feeds/private-apis">Private APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/oracles/gcp">Google Cloud Oracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr class="sidebar-separator"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><h3 class="sidebar__custom_label sidebar__category_label">Solana</h3></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/solana/sdk">SDKs</a><button aria-label="Toggle the collapsible sidebar category &#x27;SDKs&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/solana/feeds">Data Feeds</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Feeds&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/solana/vrf">VRF Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/guides/solana/functions">Functions: Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/solana/test-integration">Test Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr class="sidebar-separator"></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><h3 class="sidebar__custom_label sidebar__category_label">EVM</h3></li></ul></nav></div></div></aside><main class="docMainContainer_Hdm5"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_w_tV"><div class="docItemContainer_e5S2"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_JYEQ" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_pvky"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Functions: Getting Started</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_iNLC theme-doc-toc-mobile tocMobile_vZMM"><button type="button" class="clean-btn tocCollapsibleButton_EDU9">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Functions: Getting Started</h1></header><p>Switchboard Functions allow you to verifiably execute your own Rust code
off-chain and submit transactions either on a pre-defined cron schedule or
on-demand. Switchboard Functions gives smart contracts greater flexibility as
they can delegate execution to an off-chain computational layer.</p><p>In this example we will build a custom oracle that pushes the latest price of
BTC, ETH, and SOL to your program every 5 seconds.</p><p><strong>Integration Checklist:</strong></p><ul class="contains-task-list containsTaskList_qCnz"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Define Switchboard interface in your program</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Write a custom function in Rust</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Deploy function to Docker container</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Create Switchboard function account</li></ul><h2 class="anchor anchorWithStickyNavbar_I2rA" id="define-switchboard-interface-in-your-program">Define Switchboard interface in your program<a href="#define-switchboard-interface-in-your-program" class="hash-link" aria-label="Direct link to Define Switchboard interface in your program" title="Direct link to Define Switchboard interface in your program">‚Äã</a></h2><p>The Attestation Program contains a set of verifier oracles which watch the chain
for attestation requests. When a request is found the verifier oracles will
execute your container within a secure enclave. The container contains your
custom off-chain logic and needs to return a list of instructions along with a
quote generated from within the enclave. The verifier oracles will attest, or
&quot;verify&quot;, that the code running within the enclave matches the expected enclave
values you control.</p><p>The very first instruction returned by your function should be the Switchboard
<strong><em>functionVerify</em></strong> instruction. This instruction is signed by the verifier
oracle which is also run within an enclave and has its verifier codebase
attested on-chain. If we can prove the keypair never left the enclave and the
keypair signed the transaction, then we can be sure that the code was executed
securely.</p><p>Your on-chain program needs to have an instruction which verifies the
<code>function.enclaveSigner</code> has signed the transaction.</p><div class="language-rust codeBlockContainer_Quur theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_Vfi5"><pre tabindex="0" class="prism-code language-rust codeBlock_mYJK thin-scrollbar"><code class="codeBlockLines_qVeQ"><span class="token-line" style="color:#9EFEFF"><span class="token keyword" style="color:rgb(255, 157, 0)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(255, 157, 0)">switchboard_solana</span><span class="token namespace punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token class-name" style="color:rgb(250, 208, 0)">EnclaveAccountData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">FunctionAccountData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">#[derive(Accounts)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">struct</span><span class="token plain"> </span><span class="token type-definition class-name" style="color:rgb(250, 208, 0)">SaveDataInstruction</span><span class="token operator" style="color:rgb(255, 157, 0)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;info</span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// ... your required accounts to modify your program&#x27;s state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// We use this to derive and verify the functions enclave state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">#[account(</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">        constraint =</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">            FunctionAccountData::validate_enclave(</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">                &amp;function.to_account_info(),</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">                &amp;enclave.to_account_info(),</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">                &amp;enclave_signer.to_account_info()</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">            )?</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">    )]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token keyword" style="color:rgb(255, 157, 0)">pub</span><span class="token plain"> function</span><span class="token punctuation" style="color:rgb(255, 255, 255)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">AccountLoader</span><span class="token operator" style="color:rgb(255, 157, 0)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;info</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">FunctionAccountData</span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token keyword" style="color:rgb(255, 157, 0)">pub</span><span class="token plain"> enclave</span><span class="token punctuation" style="color:rgb(255, 255, 255)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">AccountLoader</span><span class="token operator" style="color:rgb(255, 157, 0)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;info</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">EnclaveAccountData</span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token keyword" style="color:rgb(255, 157, 0)">pub</span><span class="token plain"> enclave_signer</span><span class="token punctuation" style="color:rgb(255, 255, 255)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">Signer</span><span class="token operator" style="color:rgb(255, 157, 0)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;info</span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_KT6E"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_XOUQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_qFB6"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_g7mc"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>validate_enclave</code> method will verify:</p><ol><li>The provided enclave account corresponds to the provided function account</li><li>The provided signer matches the function&#x27;s enclave signer and has signed the
transaction</li><li>The provided enclave accounts mr_enclave value is present in the function
accounts mr_enclaves array.</li></ol><h2 class="anchor anchorWithStickyNavbar_I2rA" id="write-a-custom-function-in-rust">Write a custom function in Rust<a href="#write-a-custom-function-in-rust" class="hash-link" aria-label="Direct link to Write a custom function in Rust" title="Direct link to Write a custom function in Rust">‚Äã</a></h2><p>Now we need to write our custom function which will invoke our program and save
the trading prices to our program state.</p><p>Clone the
<a href="https://github.com/switchboard-xyz/solana-functions-template" target="_blank" rel="noopener noreferrer">solana-functions-template</a>
repository:</p><div class="language-bash codeBlockContainer_Quur theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_Vfi5"><pre tabindex="0" class="prism-code language-bash codeBlock_mYJK thin-scrollbar"><code class="codeBlockLines_qVeQ"><span class="token-line" style="color:#9EFEFF"><span class="token plain">gh repo create myrepo </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--template</span><span class="token plain"> switchboard-xyz/solana-functions-template</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic"># or just git clone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">git</span><span class="token plain"> clone https://github.com/switchboard-xyz/solana-functions-template.git</span><br></span></code></pre><div class="buttonGroup_KT6E"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_XOUQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_qFB6"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_g7mc"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see a file in <code>src/main.rs</code> similar to:</p><div class="language-rust codeBlockContainer_Quur theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_Vfi5"><pre tabindex="0" class="prism-code language-rust codeBlock_mYJK thin-scrollbar"><code class="codeBlockLines_qVeQ"><span class="token-line" style="color:#9EFEFF"><span class="token keyword" style="color:rgb(255, 157, 0)">pub</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">use</span><span class="token plain"> </span><span class="token namespace" style="color:rgb(255, 157, 0)">switchboard_solana</span><span class="token namespace punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token namespace" style="color:rgb(255, 157, 0)">prelude</span><span class="token namespace punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token operator" style="color:rgb(255, 157, 0)">*</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token attribute attr-name" style="color:rgb(255, 180, 84)">#[tokio::main(worker_threads = 12)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:rgb(250, 208, 0)">main</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// First, initialize the runner instance with a freshly generated Gramine keypair</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token keyword" style="color:rgb(255, 157, 0)">let</span><span class="token plain"> runner </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">FunctionRunner</span><span class="token punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token function" style="color:rgb(250, 208, 0)">new_from_cluster</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token class-name" style="color:rgb(250, 208, 0)">Cluster</span><span class="token punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token class-name" style="color:rgb(250, 208, 0)">Devnet</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">None</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">unwrap</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Then, write your own Rust logic and build a Vec of instructions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Should  be under 700 bytes after serialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token keyword" style="color:rgb(255, 157, 0)">let</span><span class="token plain"> ixs</span><span class="token punctuation" style="color:rgb(255, 255, 255)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">Vec</span><span class="token operator" style="color:rgb(255, 157, 0)">&lt;</span><span class="token namespace" style="color:rgb(255, 157, 0)">solana_program</span><span class="token namespace punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token namespace" style="color:rgb(255, 157, 0)">instruction</span><span class="token namespace punctuation" style="color:rgb(255, 255, 255)">::</span><span class="token class-name" style="color:rgb(250, 208, 0)">Instruction</span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token macro property" style="color:rgb(255, 157, 0)">vec!</span><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Finally, emit the signed quote and partially signed transaction to the functionRunner oracle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    </span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// The functionRunner oracle will use the last outputted word to stdout as the serialized result. This is what gets executed on-chain.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    runner</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">emit</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">ixs</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token keyword" style="color:rgb(255, 157, 0)">await</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">unwrap</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><br></span></code></pre><div class="buttonGroup_KT6E"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_XOUQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_qFB6"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_g7mc"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To write your custom Switchboard function just append instructions to the <code>ixs</code>
array. The FunctionRunner will automatically prepend the <code>function_verify</code>
instruction with the quote generated from the enclave. The quote verifier oracle
running the function will verify this instruction before sending your
transaction.</p><p>See
<a href="https://github.com/switchboard-xyz/sbv2-solana/blob/main/examples/functions/01_basic_oracle/sgx-function/src/main.rs" target="_blank" rel="noopener noreferrer">examples/functions/01_basic_oracle/sgx-function/src/main.rs</a>
in Switchboard&#x27;s Solana SDK for the full example code.</p><h2 class="anchor anchorWithStickyNavbar_I2rA" id="deploy-function-to-docker-container">Deploy function to Docker container<a href="#deploy-function-to-docker-container" class="hash-link" aria-label="Direct link to Deploy function to Docker container" title="Direct link to Deploy function to Docker container">‚Äã</a></h2><p>The template repository includes a Makefile to streamline publishing your
container to the docker repository along with outputting your MrEnclave
measurement. This measurement corresponds to the code fingerprint of the
outputted Rust binary. You should store this value in the function account we
create in the following step. This will ensure that the only code that is
allowed to add data to your smart contract must be generated from a binary with
this signature. You can add multiple MrEnclave values to your function account
to allow backwards compatibility and make upgrades easier.</p><p>Edit the Makefile and add your docker registry.</p><div class="language-makefile codeBlockContainer_Quur theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_Vfi5"><pre tabindex="0" class="prism-code language-makefile codeBlock_mYJK thin-scrollbar"><code class="codeBlockLines_qVeQ"><span class="token-line" style="color:#9EFEFF"><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic"># Variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">## Cargo.toml name of the compiled binary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">CARGO_NAME</span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain">switchboard-function</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">## Docker registry image name (Ex: switchboardlabs/basic-oracle-function)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">DOCKER_IMAGE_NAME</span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain">switchboard-function</span><br></span></code></pre><div class="buttonGroup_KT6E"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_XOUQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_qFB6"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_g7mc"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use one of the following commands to compile your function:</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>make</code></td><td>Build the container locally and output the MrEnclave measurement</td></tr><tr><td><code>make publish</code></td><td>Publish the container to the provided docker repository under the latest tag</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_I2rA" id="create-switchboard-function-account">Create Switchboard function account<a href="#create-switchboard-function-account" class="hash-link" aria-label="Direct link to Create Switchboard function account" title="Direct link to Create Switchboard function account">‚Äã</a></h2><p>Finally we just need to create our function account on-chain. We will define a
cron schedule of <code>5 * * * * *</code> which will invoke our function every 5 seconds.
We will need to pre-fund our function escrow account in order to reward verifier
oracles for running our function.</p><div class="tabs-container tabList_EfWB"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_snRV navbar_icon__switchboard tabs__item--active">Web App</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_snRV navbar_icon__javascript">@switchboard-xyz/solana.js</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_snRV navbar_icon__terminal">sbv2 CLI</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_HEOx"><p>Visit the Switchboard app:
<a href="https://beta.app.switchboard.xyz/" target="_blank" rel="noopener noreferrer">beta.app.switchboard.xyz</a></p><p>In the top right, sign in to your Solana wallet for the selected cluster.</p><p><img loading="lazy" alt="Switchboard App Sign-in Solana" src="/assets/images/explorer-sign-in-bfc99ca60a9c0aec073d6022d098c74a.png" width="1058" height="356" class="img_sqC8"></p><p>Then click build and start configuring your function</p><p><img loading="lazy" alt="Switchboard App Function Config Modal" src="/assets/images/explorer-function-config-6774944f1093f5d5eb17c9a21a575e04.png" width="691" height="654" class="img_sqC8"></p></div><div role="tabpanel" class="tabItem_HEOx" hidden=""><div class="language-typescript codeBlockContainer_Quur theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_Vfi5"><pre tabindex="0" class="prism-code language-typescript codeBlock_mYJK thin-scrollbar"><code class="codeBlockLines_qVeQ"><span class="token-line" style="color:#9EFEFF"><span class="token keyword" style="color:rgb(255, 157, 0)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  AttestationQueueAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  FunctionAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  parseMrEnclave</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  SwitchboardProgram</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;@switchboard-xyz/solana.js&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Load the Switchboard program and an existing Attestation Queue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> program </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">await</span><span class="token plain"> SwitchboardProgram</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">load</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;devnet&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token keyword" style="color:rgb(255, 157, 0)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(250, 208, 0)">Connection</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&quot;https://api.devnet.solana.com&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  payerKeypair</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  attestationQueueAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  queueAccountData</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">await</span><span class="token plain"> AttestationQueueAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">load</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain">program</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;My Attestation Queue Pubkey&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Create the FunctionAccount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">[</span><span class="token plain">functionAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"> txnSignature</span><span class="token punctuation" style="color:rgb(255, 255, 255)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(255, 157, 0)">await</span><span class="token plain"> FunctionAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">create</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  ctx</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token plain">program</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(255, 255, 255)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    name</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;FUNCTION_NAME&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    metadata</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;FUNCTION_METADATA&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    schedule</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;5 * * * * *&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    container</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;switchboardlabs/basic-oracle-function&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    containerRegistry</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;docker&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    version</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;latest&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    mrEnclave</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">parseMrEnclave</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token string" style="color:rgb(165, 255, 144)">&quot;my MrEnclave value&quot;</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">    attestationQueue</span><span class="token operator" style="color:rgb(255, 157, 0)">:</span><span class="token plain"> attestationQueueAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(255, 255, 255)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic">// Wrap 0.25 SOL into the functionAccount wallet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token keyword" style="color:rgb(255, 157, 0)">await</span><span class="token plain"> functionAccount</span><span class="token punctuation" style="color:rgb(255, 255, 255)">.</span><span class="token function" style="color:rgb(250, 208, 0)">wrap</span><span class="token punctuation" style="color:rgb(255, 255, 255)">(</span><span class="token number" style="color:rgb(255, 98, 140)">0.25</span><span class="token punctuation" style="color:rgb(255, 255, 255)">)</span><span class="token punctuation" style="color:rgb(255, 255, 255)">;</span><br></span></code></pre><div class="buttonGroup_KT6E"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_XOUQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_qFB6"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_g7mc"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_HEOx" hidden=""><div class="language-bash codeBlockContainer_Quur theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_Vfi5"><pre tabindex="0" class="prism-code language-bash codeBlock_mYJK thin-scrollbar"><code class="codeBlockLines_qVeQ"><span class="token-line" style="color:#9EFEFF"><span class="token plain">sbv2 solana </span><span class="token keyword" style="color:rgb(255, 157, 0)">function</span><span class="token plain"> create CkvizjVnm2zA5Wuwan34NhVT3zFc7vqUyGnA6tuEF5aE </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--name</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;My Function&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--metadata</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;Basic binance oracle with TWAP&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--fundAmount</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">0.25</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--schedule</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;30 * * * * *&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--container</span><span class="token plain"> switchboardlabs/basic-oracle-function </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--containerRegistry</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">docker</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--version</span><span class="token plain"> solana </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--keypair</span><span class="token plain"> ~/.config/id/solana.json</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token comment" style="color:rgb(179, 98, 255);font-style:italic"># or fund an existing function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">sbv2 solana </span><span class="token keyword" style="color:rgb(255, 157, 0)">function</span><span class="token plain"> fund </span><span class="token variable" style="color:rgb(255, 238, 128)">$MY_FUNCTION_PUBKEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--fundAmount</span><span class="token plain"> </span><span class="token number" style="color:rgb(255, 98, 140)">0.25</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--keypair</span><span class="token plain"> ~/.config/id/solana.json</span><br></span></code></pre><div class="buttonGroup_KT6E"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_XOUQ" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_qFB6"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_g7mc"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/solana/vrf"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">VRF Integration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/solana/test-integration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Test Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_zyeu thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#define-switchboard-interface-in-your-program" class="table-of-contents__link toc-highlight">Define Switchboard interface in your program</a></li><li><a href="#write-a-custom-function-in-rust" class="table-of-contents__link toc-highlight">Write a custom function in Rust</a></li><li><a href="#deploy-function-to-docker-container" class="table-of-contents__link toc-highlight">Deploy function to Docker container</a></li><li><a href="#create-switchboard-function-account" class="table-of-contents__link toc-highlight">Create Switchboard function account</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"></div></footer></div>
<script src="/assets/js/runtime~main.40737822.js"></script>
<script src="/assets/js/main.3ca437e8.js"></script>
</body>
</html>