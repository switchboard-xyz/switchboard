<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-node-operator/getting-started">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Getting Started | Switchboard</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.switchboard.xyz/img/documentation_card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.switchboard.xyz/img/documentation_card.jpg"><meta data-rh="true" property="og:url" content="https://docs.switchboard.xyz/node-operator/getting-started"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Getting Started | Switchboard"><meta data-rh="true" name="description" content="This guide will walk you through the process of using k3sup"><meta data-rh="true" property="og:description" content="This guide will walk you through the process of using k3sup"><meta data-rh="true" name="keywords" content="Solana,Solana SDK,Oracles,Web3,Off-chain,Randomness"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.switchboard.xyz/node-operator/getting-started"><link data-rh="true" rel="alternate" href="https://docs.switchboard.xyz/node-operator/getting-started" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.switchboard.xyz/node-operator/getting-started" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XO84KDTPTB-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Switchboard RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Switchboard Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Switchboard" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.749ce50d.css">
<link rel="preload" href="/assets/js/runtime~main.621f9f8a.js" as="script">
<link rel="preload" href="/assets/js/main.b0db4851.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_NEwj" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/fulllogo.svg" alt="Switchboard Logo" class="themedImage_zigW themedImage--light_UAuT"><img src="/img/white_fulllogo.svg" alt="Switchboard Logo" class="themedImage_zigW themedImage--dark_ptso"></div><b class="navbar__title text--truncate">Switchboard</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a class="navbar__item navbar__link" href="/api">API</a><div class="searchBox_ZBJZ"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/switchboard-xyz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_icon__github" aria-label="GitHub repository"></a><a href="https://twitter.com/switchboardxyz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_icon__twitter" aria-label="Twitter Link"></a><div class="toggle_iIPP colorModeToggle_PgEb"><button class="clean-btn toggleButton_tzTg toggleButtonDisabled_R9oo" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_ypWG"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_SjuW"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Fm9y docsWrapper_T0rs"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sQb8" type="button"></button><div class="docPage_qGah"><aside class="theme-doc-sidebar-container docSidebarContainer__wrd"><div class="sidebarViewport_N80n"><div class="sidebar__6nv"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_RyQc"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/architecture/switchboard-v3/oracle-problem">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/secrets">learn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/solana/quick-start">Solana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/node-operator/overview">Node Operator</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node-operator/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/node-operator/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node-operator/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/node-operator/other-commands">Other Commands</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/info/more-tee-sgx">More Info</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/community">Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/security">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/terms">Terminology</a></li></ul></nav></div></div></aside><main class="docMainContainer_Xplm"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_S1Lq"><div class="docItemContainer_AE8f"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_uMQj" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_KEnQ"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Node Operator</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Getting Started</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_JoLs theme-doc-toc-mobile tocMobile_Dfgs"><button type="button" class="clean-btn tocCollapsibleButton_oou1">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Guide to Create a K8s Cluster &amp; Install K8s SGX Plugin</h1><p>This guide will walk you through the process of using <code>k3sup</code>
to create a Kubernetes cluster on a virtual machine with SGX
enabled, and then install the Kubernetes SGX plugin.</p><h3 class="anchor anchorWithStickyNavbar_l0_u" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3><ul><li>A machine with SGX enabled with kernel version &gt;=6.0</li><li>Helm cli installed</li><li>kubectl cli installed</li><li>A copy of the switchboard infra-external repo installed on user machine</li></ul><p>If you are using a debian based distro, you can install the
SGX packages like this:</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token builtin class-name" style="color:rgb(250, 208, 0)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;deb https://download.01.org/intel-sgx/sgx_repo/ubuntu </span><span class="token string variable" style="color:rgb(255, 238, 128)">$(</span><span class="token string variable" style="color:rgb(255, 238, 128)">lsb_release </span><span class="token string variable parameter variable" style="color:rgb(255, 238, 128)">-cs</span><span class="token string variable" style="color:rgb(255, 238, 128)">)</span><span class="token string" style="color:rgb(165, 255, 144)"> main&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">tee</span><span class="token plain"> /etc/apt/sources.list.d/intel-sgx.list </span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token plain">/dev/null</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-sSL</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">sudo</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-E</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(250, 208, 0)">add</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain"></span><span class="token function" style="color:rgb(250, 208, 0)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">install</span><span class="token plain"> sgx-aesm-service libsgx-aesm-launch-plugin libsgx-aesm-quote-ex-plugin libsgx-aesm-ecdsa-plugin libsgx-aesm-epid-plugin libsgx-dcap-quote-verify</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can clone the infra-external repo like so</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token function" style="color:rgb(250, 208, 0)">git</span><span class="token plain"> clone https://github.com/switchboard-xyz/infra-external.git</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_l0_u" id="step-1-create-a-kubernetes-cluster">Step 1: Create a Kubernetes Cluster<a href="#step-1-create-a-kubernetes-cluster" class="hash-link" aria-label="Direct link to Step 1: Create a Kubernetes Cluster" title="Direct link to Step 1: Create a Kubernetes Cluster">​</a></h3><p>If you want to create a kubernetes cluster consisting of a
single node, k3s is the best option. <code>k3sup</code> is the easisest
way to set up such a cluster. You can install this cli tool
by running the following command in your terminal:</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token function" style="color:rgb(250, 208, 0)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-sLS</span><span class="token plain"> https://get.k3sup.dev </span><span class="token operator" style="color:rgb(255, 157, 0)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">sh</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then move <code>k3sup</code> to your <code>/usr/local/bin/</code>:</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token function" style="color:rgb(250, 208, 0)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">install</span><span class="token plain"> k3sup /usr/local/bin/</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, set up a machine that you have ssh access to and
change to that context in kubectl</p><div class="codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-text codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">k3sup install --ip $MY_MACHINE_IP --user root --context k3s-devnet</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl config use-context k3s-devnet</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more advanced configuration, please refer to the
documentation at <a href="https://github.com/alexellis/k3sup" target="_blank" rel="noopener noreferrer">https://github.com/alexellis/k3sup</a>
for more details on how to set up your cluster.</p><p>In order to access the cluster, you must use the kubeconfig that&#x27;s generated in your terminal&#x27;s working directory during k3sup install. You can either reference it with the --kubeconfig flag or with the following commands to integrate it into a pre-existing default kubeconfig file</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token builtin class-name" style="color:rgb(250, 208, 0)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(255, 238, 128)">KUBECONFIG</span><span class="token operator" style="color:rgb(255, 157, 0)">=~</span><span class="token plain">/.kube/config:/path/to/new/kubeconfig</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl config view </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--flatten</span><span class="token plain"> </span><span class="token operator" style="color:rgb(255, 157, 0)">&gt;</span><span class="token plain"> ~/.kube/config</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In order to validate that you can connect to the cluster, try running the following commands. If you are getting timeouts, it may because of geographical distance (solved by vpn) or port 6443 not being open</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">$ kubectl get po</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">No resources found </span><span class="token keyword" style="color:rgb(255, 157, 0)">in</span><span class="token plain"> default namespace.</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_l0_u" id="step-2-install-supporting-applications">Step 2: Install supporting applications<a href="#step-2-install-supporting-applications" class="hash-link" aria-label="Direct link to Step 2: Install supporting applications" title="Direct link to Step 2: Install supporting applications">​</a></h3><p>While an ingress controller (traefik) is automatically
installed as part of setting up a k3s cluster, you may
also want to set up prometheus or vmetrics to scrape
metrics from the oracles, secrets management like
infisical, or a log aggregator like loki.</p><p>Exposing metrics and logs are strongly encouraged for all oracle operators. To do so, first you must register a domain/subdomain to use for your metrics and logs endpoints respectively. If you are using k3s, then you can find the external ip address by running this command:</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-n</span><span class="token plain"> kube-system get svc traefik</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you are using a different kubernetes distribution and/or ingress controller, you can find that wit this command:</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl get svc --all-namespaces</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you have the domains registered, go to infra-external/infra-apps/ and configure cert-manager-issuer.yaml with your account information that you&#x27;ve set up by following the cert-manager documentation. Then configure vmetrics-values.yaml and loki-values.yaml with those respective domains. After that, you can deploy as follows: </p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(250, 208, 0)">add</span><span class="token plain"> vm https://victoriametrics.github.io/helm-charts/</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm upgrade </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-i</span><span class="token plain"> vmsingle vm/victoria-metrics-single </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-f</span><span class="token plain"> vmetrics-values.yaml</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(250, 208, 0)">add</span><span class="token plain"> grafana https://grafana.github.io/helm-charts</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm upgrade </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-i</span><span class="token plain"> grafana grafana/grafana </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-f</span><span class="token plain"> grafana-values.yaml</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(250, 208, 0)">add</span><span class="token plain"> jetstack https://charts.jetstack.io</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm </span><span class="token function" style="color:rgb(250, 208, 0)">install</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  cert-manager jetstack/cert-manager </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--namespace</span><span class="token plain"> cert-manager </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  --create-namespace </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--version</span><span class="token plain"> v1.12.3 </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(255, 238, 128)">installCRDs</span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain">true </span><span class="token punctuation" style="color:rgb(255, 255, 255)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(255, 238, 128)">global.leaderElection.namespace</span><span class="token operator" style="color:rgb(255, 157, 0)">=</span><span class="token plain">cert-manager</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">  </span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(250, 208, 0)">add</span><span class="token plain"> infisical-helm-charts </span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://dl.cloudsmith.io/public/infisical/helm-charts/helm/charts/&#x27;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm </span><span class="token function" style="color:rgb(250, 208, 0)">install</span><span class="token plain"> secrets-operator infisical-helm-charts/secrets-operator</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_l0_u" id="step-3-install-the-kubernetes-sgx-plugin">Step 3: Install the Kubernetes SGX Plugin<a href="#step-3-install-the-kubernetes-sgx-plugin" class="hash-link" aria-label="Direct link to Step 3: Install the Kubernetes SGX Plugin" title="Direct link to Step 3: Install the Kubernetes SGX Plugin">​</a></h3><p>Before installing the SGX plugin, check the latest
version (ex: v0.28.0) at <a href="https://github.com/intel/intel-device-plugins-for-kubernetes/tags" target="_blank" rel="noopener noreferrer">https://github.com/intel/intel-device-plugins-for-kubernetes/tags</a>.
Then replace the version number in the below URLs accordingly:</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-k</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://github.com/intel/intel-device-plugins-for-kubernetes/deployments/nfd/?ref=v0.28.0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-k</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://github.com/intel/intel-device-plugins-for-kubernetes/deployments/nfd/overlays/node-feature-rules?ref=v0.28.0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-k</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://github.com/intel/intel-device-plugins-for-kubernetes/deployments/operator/default?ref=v0.28.0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-f</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&#x27;https://raw.githubusercontent.com/intel/intel-device-plugins-for-kubernetes/v0.28.0/deployments/operator/samples/deviceplugin_v1_sgxdeviceplugin.yaml&#x27;</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To confirm sucessuful installation, you can run the following command and should see a similar result</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">$ kubectl get </span><span class="token function" style="color:rgb(250, 208, 0)">node</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-o</span><span class="token plain"> yaml </span><span class="token operator" style="color:rgb(255, 157, 0)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(250, 208, 0)">grep</span><span class="token plain"> </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;epc&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">      nfd.node.kubernetes.io/extended-resources: sgx.intel.com/epc</span><br></span><span class="token-line" style="color:#9EFEFF"><span class="token plain">      sgx.intel.com/epc: </span><span class="token string" style="color:rgb(165, 255, 144)">&quot;396361728&quot;</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_l0_u" id="step-4-install-switchboard-oracle">Step 4: Install Switchboard Oracle<a href="#step-4-install-switchboard-oracle" class="hash-link" aria-label="Direct link to Step 4: Install Switchboard Oracle" title="Direct link to Step 4: Install Switchboard Oracle">​</a></h3><p>Follow the instructions in the Switchboard Oracle
repository for how to install it to your cluster.</p><div class="language-bash codeBlockContainer_SRiU theme-code-block" style="--prism-color:#9EFEFF;--prism-background-color:#2D2A55"><div class="codeBlockContent_xPM9"><pre tabindex="0" class="prism-code language-bash codeBlock_Qldw thin-scrollbar"><code class="codeBlockLines_e63L"><span class="token-line" style="color:#9EFEFF"><span class="token plain">helm upgrade </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-i</span><span class="token plain"> switchboard-oracle ./charts/switchboard-oracle </span><span class="token parameter variable" style="color:rgb(255, 238, 128)">-f</span><span class="token plain"> </span><span class="token variable" style="color:rgb(255, 238, 128)">$HELM_VALUES_YAML</span><br></span></code></pre><div class="buttonGroup_xHwo"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_WhkM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_yXPi"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Mz3q"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/node-operator/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/node-operator/deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deployment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ppPI thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#step-1-create-a-kubernetes-cluster" class="table-of-contents__link toc-highlight">Step 1: Create a Kubernetes Cluster</a></li><li><a href="#step-2-install-supporting-applications" class="table-of-contents__link toc-highlight">Step 2: Install supporting applications</a></li><li><a href="#step-3-install-the-kubernetes-sgx-plugin" class="table-of-contents__link toc-highlight">Step 3: Install the Kubernetes SGX Plugin</a></li><li><a href="#step-4-install-switchboard-oracle" class="table-of-contents__link toc-highlight">Step 4: Install Switchboard Oracle</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"></div></footer></div>
<script src="/assets/js/runtime~main.621f9f8a.js"></script>
<script src="/assets/js/main.b0db4851.js"></script>
</body>
</html>